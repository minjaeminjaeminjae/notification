<!DOCTYPE html>
<html>
  <head>
    <title>26ë…„ 3ì›”, 5ì›” SAT ëŒ€ë¹„ë°˜ ê³µì§€ ì´ë™ì¤‘...</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8DDW7EXZJL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-8DDW7EXZJL');
    </script>
  </head>
  <body>
    <div style="text-align: center; margin-top: 100px; font-family: sans-serif;">
        <h2>'26ë…„ 3ì›”, 5ì›” SATì‹œí—˜ ëŒ€ë¹„ë°˜'</h2>
        <p>ìƒì„¸ ê³µì§€ í˜ì´ì§€ë¡œ ì´ë™ ì¤‘ì…ë‹ˆë‹¤...</p>
        <p style="color: gray; font-size: 0.8em;">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
    </div>

    <script>
      const params = new URLSearchParams(window.location.search);
      const src = params.get('src') || 'unknown';

      // 2. êµ¬ê¸€ ì•±ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ ì£¼ì†Œ (ìœ ì§€)
      const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwQmp5m2g9Fb1a9Tqy4ePEiyi7nu_Xfgw0wb3KJsnUz3gSb1hkuvFDGFKHekE2D8xAnJg/exec";

      // 3. ì´ë™í•  ë¸”ë¡œê·¸ ê³µì§€ ì£¼ì†Œ (ìœ ì§€)
      const NOTICE_URL = "https://blog.naver.com/superfastsat/224098138489"; 

      // -----------------------------------------------------------
      // [ì—…ê·¸ë ˆì´ë“œëœ ë´‡/í¬ë¡¤ëŸ¬ ê°ì§€ í•„í„°]
      // -----------------------------------------------------------
      function checkIsBot() {
        const ua = navigator.userAgent.toLowerCase();
        
        // 1. ë´‡ í‚¤ì›Œë“œ + headless(í™”ë©´ì—†ëŠ” ë¸Œë¼ìš°ì €) ê°ì§€
        if (/bot|crawler|spider|crawling|facebook|kakaotalk|twitter|slack|whatsapp|telegram|naver|headless|lighthouse|google-inspectiontool/.test(ua)) {
            return true;
        }

        // 2. [ê°•ë ¥ ì°¨ë‹¨] ìë™í™” ë„êµ¬(Selenium, Puppeteer) ê°ì§€
        if (navigator.webdriver) {
            return true;
        }

        // 3. í™”ë©´ í¬ê¸°ê°€ 0ì´ê±°ë‚˜ ê°ì§€ë˜ì§€ ì•ŠëŠ” ìœ ë ¹ ë¸Œë¼ìš°ì € ì°¨ë‹¨
        if (!window.screen || window.screen.width === 0 || window.screen.height === 0) {
            return true;
        }

        return false;
      }

      const isBot = checkIsBot();

      // 4. GA ì´ë²¤íŠ¸ ì „ì†¡
      gtag('event', 'notice_click', {
        event_category: 'Redirect',
        event_label: src  
      });

      // 5. ìŠ¬ë™ ì „ì†¡ (ë´‡ì´ ì•„ë‹ ë•Œë§Œ ì‹¤í–‰)
      if (!isBot) {
          // 0.5ì´ˆ ë”œë ˆì´ë¥¼ ì£¼ì–´ ìˆœê°„ ìŠ¤ìº” ë´‡ íšŒí”¼
          setTimeout(() => {
            fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ 
                    src: src, 
                    type: 'class_notice' 
                }),
            }).catch(err => console.log("Slack Alert Error:", err));
          }, 500);
      } else {
          console.log("ğŸš« Bot detected. Slack alert skipped.");
      }

      // 6. 3ì´ˆ í›„ ë¸”ë¡œê·¸ë¡œ ì´ë™
      setTimeout(() => {
        window.location.href = NOTICE_URL;
      }, 3000);
    </script>
  </body>
</html>
